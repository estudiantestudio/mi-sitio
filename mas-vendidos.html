<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ”¥ MÃ¡s vendidos | Comfort Home</title>
  <meta name="description" content="Los productos mÃ¡s vendidos y en tendencia. Compra rÃ¡pida con carrito, favoritos y pago WebPay demo.">
  <link rel="stylesheet" href="styles.css" />
</head>

<body class="page-mas-vendidos">

<header class="site-header">
  <div class="topbar">
    <div class="brand">
      <span class="brand-mark">ğŸª”</span>
      <a href="index.html" class="brand-name">Comfort Home</a>
    </div>

    <div class="search">
      <input id="mvSearch" type="search" placeholder="ğŸ” Buscar en mÃ¡s vendidos: incienso, vela, vainilla..." />
    </div>

    <div class="header-actions">
      <a class="btn ghost" href="index.html">Volver</a>
      <button class="btn ghost" onclick="openFavorites()">â¤ï¸ Favoritos <span id="favCount">(0)</span></button>
      <button class="btn primary" onclick="openCart()">ğŸ›’ Carrito <span id="cartCount">(0)</span></button>
    </div>
  </div>

  <!-- mini barra de prueba social -->
  <div class="mv-socialbar">
    <div class="mv-pill">â­ 4.8/5 promedio</div>
    <div class="mv-pill">ğŸšš EnvÃ­o rÃ¡pido a todo Chile</div>
    <div class="mv-pill">ğŸ”¥ Lo que todos estÃ¡n comprando ahora</div>
  </div>
</header>

<main>

  <!-- HERO -->
  <section class="hero hero-mini">
    <div class="hero-inner">
      <h1>ğŸ”¥ MÃ¡s vendidos / Top tendencia</h1>
      <p>Descubre lo que nuestros clientes aman. Prueba social + compra rÃ¡pida para reducir indecisiÃ³n.</p>

      <div class="mv-hero-row">
        <div class="mv-countdown">
          <div class="mv-count-title">â³ Oferta de tendencia termina en:</div>
          <div class="mv-count-time" id="mvCountdown">00:00:00</div>
          <div class="muted" style="margin-top:6px;">(Demo: contador dinÃ¡mico)</div>
        </div>

        <div class="mv-filters">
          <select id="mvSort">
            <option value="trending">Ordenar: Tendencia ğŸ”¥</option>
            <option value="rating">Mejor rating â­</option>
            <option value="sold">MÃ¡s vendidos ğŸ†</option>
            <option value="priceLow">Precio: menor a mayor</option>
            <option value="priceHigh">Precio: mayor a menor</option>
          </select>
          <button class="btn outline" onclick="clearMVFilters()">Limpiar</button>
        </div>
      </div>
    </div>
  </section>

  <!-- GRID -->
  <section class="section" id="mvGridSection">
    <div class="section-head">
      <div>
        <h2>ğŸ’ Lo que todos estÃ¡n comprando</h2>
        <p class="muted">Hover premium, badges, urgencia, favoritos + carrito + WebPay demo.</p>
      </div>
      <div class="muted" id="mvCountLabel">0 productos</div>
    </div>

    <div class="cards mv-grid" id="mvGrid"></div>
  </section>

</main>

<!-- âœ… MODAL FAVORITOS -->
<div class="modal" id="favModal">
  <div class="modal-content" style="max-width:900px;">
    <button class="modal-close" onclick="closeFavorites()">âœ•</button>
    <h2 style="margin-bottom:12px;">â¤ï¸ Mis favoritos</h2>
    <div class="cards" id="favGrid"></div>
    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:14px;">
      <button class="btn outline" onclick="closeFavorites()">Cerrar</button>
      <button class="btn primary" onclick="favAddAllToCart()">Agregar todos al carrito</button>
    </div>
  </div>
</div>

<!-- âœ… MODAL CARRITO (slide desde la derecha) -->
<div class="modal mv-drawer" id="cartModal">
  <div class="modal-content mv-drawer-panel">
    <button class="modal-close" onclick="closeCart()">âœ•</button>
    <h2 style="margin-bottom:12px;">ğŸ›’ Tu carrito</h2>
    <div id="cartList"></div>

    <div style="display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap; margin-top:14px;">
      <div class="now">Total: <span id="cartTotal">$0</span></div>
      <button class="btn primary" onclick="checkout()">Finalizar compra</button>
    </div>

    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;">
      <button class="btn outline" onclick="closeCart()">Seguir comprando</button>
      <button class="btn ghost" onclick="payWebpay()">ğŸ’³ Pagar con WebPay</button>
    </div>

    <p class="muted" style="margin-top:10px;">Carrito demo: cantidad editable + subtotal. WebPay es botÃ³n demo.</p>
  </div>
</div>

<!-- âœ… MODAL CHECKOUT -->
<div class="modal" id="checkoutModal">
  <div class="modal-content" style="max-width:900px;">
    <button class="modal-close" onclick="closeCheckout()">âœ•</button>
    <h2 style="margin-bottom:10px;">âœ… Confirmar compra</h2>
    <div id="checkoutBody"></div>
    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:14px;">
      <button class="btn outline" onclick="closeCheckout()">Seguir comprando</button>
      <button class="btn primary" onclick="confirmOrder()">Confirmar pedido</button>
      <button class="btn ghost" onclick="payWebpay()">ğŸ’³ Pagar con WebPay</button>
    </div>
    <p class="muted" style="margin-top:10px;">Checkout simulado. DespuÃ©s se conecta WebPay real.</p>
  </div>
</div>

<!-- Toast -->
<div class="mv-toast" id="mvToast">âœ… Producto agregado</div>

<!-- Floating cart -->
<button class="mv-float-cart" onclick="openCart()" aria-label="Abrir carrito">
  ğŸ›’ <span id="floatCartCount">0</span>
</button>

<script src="mas-vendidos.js"></script>
</body>
</html>
